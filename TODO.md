TODO:

all:  go through functions, reorganise code, make it cleaner (but avoid circular calling)

scan: check spm_orth !!
scan: spm 2nd level with spmT?

web:  simplify the code. don't allow uploading and other stuff
